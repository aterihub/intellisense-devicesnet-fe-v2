<template>
  <aside :class="{ 'sideBarExpanded': isExpanded }" class="sidebar">
    <!-- <div class="flex flex-col gap-5 relative px-4 w-[214px]"> -->
    <div class="sidebar-head">
      <div class="flex justify-between items-start px-4 gap-2 w-full">
        <div class="w-6 h-6">
          <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28" fill="none">
            <path
              d="M0.0010078 20.4267C-0.00487051 20.3101 0.0150206 20.1937 0.0592631 20.0856C0.103506 19.9776 0.17101 19.8807 0.256963 19.8018L11.8124 8.2669C11.9213 8.17051 12.036 8.08078 12.1558 7.99821L12.0996 7.89824H0.0384646V0H28V28H20.1465V11.3162L11.3754 20.0643H16.8129V27.9875H0.0010078V20.4267Z"
              class="fill-accent-1" />
          </svg>
        </div>
        <div class="expandButton" :class="{ 'expandButtonExpanded': isExpanded }" @click="expandSideNav">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="10" cy="10" r="9.5" class="fill-bkg-secondary stroke-bkg-tertiary" />
            <path
              d="M8.63645 5.84362C8.59134 5.79589 8.55608 5.73974 8.53267 5.67837C8.50926 5.61701 8.49817 5.55163 8.50003 5.48598C8.50188 5.42033 8.51665 5.35569 8.54349 5.29575C8.57033 5.2358 8.60872 5.18173 8.65645 5.13662C8.70419 5.09152 8.76034 5.05625 8.8217 5.03284C8.88307 5.00943 8.94844 4.99834 9.01409 5.0002C9.07974 5.00206 9.14439 5.01683 9.20433 5.04367C9.26427 5.07051 9.31834 5.10889 9.36345 5.15662L13.6135 9.65662C13.7012 9.74946 13.7501 9.87237 13.7501 10.0001C13.7501 10.1279 13.7012 10.2508 13.6135 10.3436L9.36345 14.8441C9.31864 14.8929 9.26458 14.9323 9.20442 14.96C9.14426 14.9877 9.07919 15.0032 9.01299 15.0056C8.94679 15.0079 8.88079 14.9971 8.81881 14.9737C8.75683 14.9503 8.70011 14.9149 8.65195 14.8694C8.60379 14.8239 8.56515 14.7693 8.53826 14.7088C8.51138 14.6483 8.4968 14.583 8.49535 14.5168C8.49391 14.4505 8.50564 14.3847 8.52986 14.323C8.55409 14.2614 8.59032 14.2052 8.63645 14.1576L12.5625 10.0001L8.63645 5.84362Z"
              class="fill-label-primary" />
          </svg>
        </div>
        <!-- <img :class="{ 'expandButtonExpanded': isExpanded }" @click="expandSideNav" alt="ateri logo" class="expandButton"
          src="../../assets/expand-btn.svg" width="125" height="125" /> -->
      </div>
    </div>
    <div class="sidebar-body">
      <SideNavIcon :isExpanded="isExpanded" :isActive="isDashboardActive" :route="{ name: 'dashboard' }"
        menuName="Dashboard"
        path="M3.73331 1.3335H3.66665C3.36131 1.3335 3.09865 1.3335 2.86665 1.38816C2.50749 1.47398 2.17911 1.65756 1.91789 1.91855C1.65666 2.17954 1.47279 2.50776 1.38665 2.86683C1.33331 3.09883 1.33331 3.36016 1.33331 3.66683V7.00016C1.33331 7.3055 1.33331 7.56816 1.38798 7.80016C1.4738 8.15931 1.65737 8.4877 1.91837 8.74892C2.17936 9.01015 2.50757 9.19402 2.86665 9.28016C3.09865 9.3335 3.35998 9.3335 3.66665 9.3335H6.99998C7.30531 9.3335 7.56798 9.3335 7.79998 9.27883C8.15913 9.19301 8.48751 9.00943 8.74874 8.74844C9.00996 8.48745 9.19384 8.15924 9.27998 7.80016C9.33331 7.56816 9.33331 7.30683 9.33331 7.00016V3.66683C9.33331 3.3615 9.33331 3.09883 9.27865 2.86683C9.19283 2.50768 9.00925 2.1793 8.74826 1.91807C8.48727 1.65684 8.15905 1.47297 7.79998 1.38683C7.56798 1.3335 7.30665 1.3335 6.99998 1.3335H6.93331H3.73331ZM3.17731 2.6855C3.23465 2.67216 3.32398 2.66683 3.73331 2.66683H6.93331C7.34398 2.66683 7.43198 2.67083 7.48931 2.6855C7.60909 2.71414 7.71859 2.7754 7.80567 2.86248C7.89275 2.94956 7.954 3.05906 7.98265 3.17883C7.99598 3.23483 7.99998 3.32283 7.99998 3.7335V6.9335C7.99998 7.34416 7.99598 7.43216 7.98131 7.4895C7.95267 7.60927 7.89141 7.71877 7.80433 7.80585C7.71725 7.89293 7.60775 7.95419 7.48798 7.98283C7.43331 7.99483 7.34531 8.00016 6.93331 8.00016H3.73331C3.32265 8.00016 3.23465 7.99616 3.17731 7.9815C3.05754 7.95285 2.94804 7.8916 2.86096 7.80452C2.77388 7.71743 2.71262 7.60794 2.68398 7.48816C2.67198 7.4335 2.66665 7.3455 2.66665 6.9335V3.7335C2.66665 3.32283 2.67065 3.23483 2.68531 3.1775C2.71395 3.05772 2.77521 2.94822 2.86229 2.86114C2.94937 2.77406 3.05887 2.7128 3.17865 2.68416M13.0666 1.3335H13C12.6946 1.3335 12.432 1.3335 12.2 1.38816C11.8408 1.47398 11.5124 1.65756 11.2512 1.91855C10.99 2.17954 10.8061 2.50776 10.72 2.86683C10.6666 3.09883 10.6666 3.36016 10.6666 3.66683V7.00016C10.6666 7.3055 10.6666 7.56816 10.7213 7.80016C10.8071 8.15931 10.9907 8.4877 11.2517 8.74892C11.5127 9.01015 11.8409 9.19402 12.2 9.28016C12.432 9.3335 12.6933 9.3335 13 9.3335H16.3333C16.6386 9.3335 16.9013 9.3335 17.1333 9.27883C17.4925 9.19301 17.8208 9.00943 18.0821 8.74844C18.3433 8.48745 18.5272 8.15924 18.6133 7.80016C18.6666 7.56816 18.6666 7.30683 18.6666 7.00016V3.66683C18.6666 3.3615 18.6666 3.09883 18.612 2.86683C18.5262 2.50768 18.3426 2.1793 18.0816 1.91807C17.8206 1.65684 17.4924 1.47297 17.1333 1.38683C16.9013 1.3335 16.64 1.3335 16.3333 1.3335H16.2666H13.0666ZM12.5106 2.6855C12.568 2.67216 12.6573 2.66683 13.0666 2.66683H16.2666C16.6773 2.66683 16.7653 2.67083 16.8226 2.6855C16.9424 2.71414 17.0519 2.7754 17.139 2.86248C17.2261 2.94956 17.2873 3.05906 17.316 3.17883C17.3293 3.23483 17.3333 3.32283 17.3333 3.7335V6.9335C17.3333 7.34416 17.328 7.43216 17.3146 7.4895C17.286 7.60927 17.2247 7.71877 17.1377 7.80585C17.0506 7.89293 16.9411 7.95419 16.8213 7.98283C16.7653 7.99616 16.6773 8.00016 16.2666 8.00016H13.0666C12.656 8.00016 12.568 7.99616 12.5106 7.9815C12.3909 7.95285 12.2814 7.8916 12.1943 7.80452C12.1072 7.71743 12.046 7.60794 12.0173 7.48816C12.0053 7.4335 12 7.3455 12 6.9335V3.7335C12 3.32283 12.004 3.23483 12.0186 3.1775C12.0473 3.05772 12.1085 2.94822 12.1956 2.86114C12.2827 2.77406 12.3922 2.7128 12.512 2.68416M3.66665 10.6668H6.99998C7.30531 10.6668 7.56798 10.6668 7.79998 10.7215C8.15913 10.8073 8.48751 10.9909 8.74874 11.2519C9.00996 11.5129 9.19384 11.8411 9.27998 12.2002C9.33331 12.4322 9.33331 12.6935 9.33331 13.0002V16.3335C9.33331 16.6388 9.33331 16.9015 9.27865 17.1335C9.19283 17.4926 9.00925 17.821 8.74826 18.0823C8.48727 18.3435 8.15905 18.5274 7.79998 18.6135C7.56798 18.6668 7.30665 18.6668 6.99998 18.6668H3.66665C3.36131 18.6668 3.09865 18.6668 2.86665 18.6122C2.50749 18.5263 2.17911 18.3428 1.91789 18.0818C1.65666 17.8208 1.47279 17.4926 1.38665 17.1335C1.33331 16.9015 1.33331 16.6402 1.33331 16.3335V13.0002C1.33331 12.6948 1.33331 12.4322 1.38798 12.2002C1.4738 11.841 1.65737 11.5126 1.91837 11.2514C2.17936 10.9902 2.50757 10.8063 2.86665 10.7202C3.09865 10.6668 3.35998 10.6668 3.66665 10.6668ZM3.73331 12.0002C3.32265 12.0002 3.23465 12.0042 3.17731 12.0188C3.05754 12.0475 2.94804 12.1087 2.86096 12.1958C2.77388 12.2829 2.71262 12.3924 2.68398 12.5122C2.67198 12.5668 2.66665 12.6548 2.66665 13.0668V16.2668C2.66665 16.6775 2.67065 16.7655 2.68531 16.8228C2.71395 16.9426 2.77521 17.0521 2.86229 17.1392C2.94937 17.2263 3.05887 17.2875 3.17865 17.3162C3.23465 17.3295 3.32265 17.3335 3.73331 17.3335H6.93331C7.34398 17.3335 7.43198 17.3282 7.48931 17.3148C7.60909 17.2862 7.71859 17.2249 7.80567 17.1378C7.89275 17.0508 7.954 16.9413 7.98265 16.8215C7.99598 16.7655 7.99998 16.6775 7.99998 16.2668V13.0668C7.99998 12.6562 7.99598 12.5682 7.98131 12.5108C7.95267 12.3911 7.89141 12.2816 7.80433 12.1945C7.71725 12.1074 7.60775 12.0461 7.48798 12.0175C7.43331 12.0055 7.34531 12.0002 6.93331 12.0002H3.73331ZM13.0666 10.6668H13C12.6946 10.6668 12.432 10.6668 12.2 10.7215C11.8408 10.8073 11.5124 10.9909 11.2512 11.2519C10.99 11.5129 10.8061 11.8411 10.72 12.2002C10.6666 12.4322 10.6666 12.6935 10.6666 13.0002V16.3335C10.6666 16.6388 10.6666 16.9015 10.7213 17.1335C10.8071 17.4926 10.9907 17.821 11.2517 18.0823C11.5127 18.3435 11.8409 18.5274 12.2 18.6135C12.432 18.6682 12.6946 18.6682 13 18.6682H16.3333C16.6386 18.6682 16.9013 18.6682 17.1333 18.6135C17.4922 18.5275 17.8203 18.3438 18.0813 18.0828C18.3423 17.8218 18.5259 17.4937 18.612 17.1348C18.6666 16.9028 18.6666 16.6402 18.6666 16.3348V13.0002C18.6666 12.6948 18.6666 12.4322 18.612 12.2002C18.5262 11.841 18.3426 11.5126 18.0816 11.2514C17.8206 10.9902 17.4924 10.8063 17.1333 10.7202C16.9013 10.6668 16.64 10.6668 16.3333 10.6668H16.2666H13.0666ZM12.5106 12.0188C12.568 12.0055 12.6573 12.0002 13.0666 12.0002H16.2666C16.6773 12.0002 16.7653 12.0042 16.8226 12.0188C16.9424 12.0475 17.0519 12.1087 17.139 12.1958C17.2261 12.2829 17.2873 12.3924 17.316 12.5122C17.3293 12.5682 17.3333 12.6562 17.3333 13.0668V16.2668C17.3333 16.6775 17.328 16.7655 17.3146 16.8228C17.286 16.9426 17.2247 17.0521 17.1377 17.1392C17.0506 17.2263 16.9411 17.2875 16.8213 17.3162C16.7653 17.3295 16.6773 17.3335 16.2666 17.3335H13.0666C12.656 17.3335 12.568 17.3282 12.5106 17.3148C12.3909 17.2862 12.2814 17.2249 12.1943 17.1378C12.1072 17.0508 12.046 16.9413 12.0173 16.8215C12.0053 16.7668 12 16.6788 12 16.2668V13.0668C12 12.6562 12.004 12.5682 12.0186 12.5108C12.0473 12.3911 12.1085 12.2816 12.1956 12.1945C12.2827 12.1074 12.3922 12.0461 12.512 12.0175" />
      <SideNavIcon :isExpanded="isExpanded" :isActive="isDevicesManagementActive" :route="{ name: 'devicesManagement' }"
        menuName="Devices Provisioning"
        path="M20.88 6.36585L12.63 1.84991C12.4371 1.74338 12.2204 1.6875 12 1.6875C11.7796 1.6875 11.5629 1.74338 11.37 1.84991L3.12 6.36678C2.91357 6.47973 2.7413 6.6461 2.62123 6.84848C2.50115 7.05085 2.4377 7.28178 2.4375 7.5171V16.4833C2.4377 16.7187 2.50115 16.9496 2.62123 17.152C2.7413 17.3543 2.91357 17.5207 3.12 17.6337L11.37 22.1505C11.5629 22.2569 11.7797 22.3127 12 22.3127C12.2203 22.3127 12.4371 22.2569 12.63 22.1505L20.88 17.6337C21.0864 17.5207 21.2587 17.3543 21.3788 17.152C21.4988 16.9496 21.5623 16.7187 21.5625 16.4833V7.5171C21.5625 7.28162 21.4991 7.0505 21.379 6.84794C21.2589 6.64539 21.0866 6.47887 20.88 6.36585ZM11.9063 2.83616C11.9338 2.82106 11.9648 2.81315 11.9963 2.81315C12.0277 2.81315 12.0587 2.82106 12.0862 2.83616L19.9228 7.12522L12 11.4602L4.07719 7.12522L11.9063 2.83616ZM3.65625 16.6474C3.6275 16.6308 3.60367 16.6069 3.5872 16.578C3.57073 16.5492 3.5622 16.5165 3.5625 16.4833V8.4L11.1 12.6342V20.7L3.65625 16.6474ZM20.3363 16.6474L12.63 20.7V12.6342L20.3363 8.4L20.4375 16.4815C20.4381 16.515 20.4298 16.5481 20.4133 16.5772C20.3968 16.6064 20.3728 16.6307 20.3438 16.6474H20.3363Z" />
      <SideNavIcon :isExpanded="isExpanded" :isActive="isMasterDataActive" :route="{ name: 'masterData' }"
        menuName="Master Data">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
          <path
            d="M14.1667 2.49984V17.4998M2.5 5.83317H5.83333M2.5 9.99984H5.83333M2.5 14.1665H5.83333M11.25 18.3332H16.25M11.25 1.6665H16.25H16.7869C17.3392 1.6665 17.7869 2.11422 17.7869 2.6665V17.3332C17.7869 17.8855 17.3392 18.3332 16.7869 18.3332H11H5.5C4.94772 18.3332 4.5 17.8855 4.5 17.3332V2.6665C4.5 2.11422 4.94772 1.6665 5.5 1.6665H11.25Z"
            :class="{'stroke-accent-1': isMasterDataActive , 'stroke-label-secondary'  : !isMasterDataActive}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      </SideNavIcon>
    </div>
    <div class="sidebar-foot">
      <SideNavIcon @click="signOut" :route="{ name: 'login' }" menuName="Logout">
        <path
          d="M12.085 3.3418C11.9012 3.3418 11.725 3.41479 11.5951 3.54472C11.4652 3.67464 11.3922 3.85086 11.3922 4.03461C11.3922 4.21835 11.4652 4.39457 11.5951 4.5245C11.725 4.65443 11.9012 4.72742 12.085 4.72742C13.8612 4.72742 15.5646 5.43302 16.8206 6.68898C18.0766 7.94495 18.7822 9.6484 18.7822 11.4246C18.7822 13.2008 18.0766 14.9043 16.8206 16.1602C15.5646 17.4162 13.8612 18.1218 12.085 18.1218C11.9012 18.1218 11.725 18.1948 11.5951 18.3247C11.4652 18.4546 11.3922 18.6309 11.3922 18.8146C11.3922 18.9984 11.4652 19.1746 11.5951 19.3045C11.725 19.4344 11.9012 19.5074 12.085 19.5074C14.2287 19.5074 16.2846 18.6558 17.8004 17.14C19.3162 15.6242 20.1678 13.5683 20.1678 11.4246C20.1678 9.28091 19.3162 7.22502 17.8004 5.7092C16.2846 4.19338 14.2287 3.3418 12.085 3.3418Z" />
        <path
          d="M7.95583 9.14363C8.07821 9.0123 8.14483 8.83859 8.14166 8.65911C8.1385 8.47962 8.06579 8.30837 7.93885 8.18144C7.81192 8.0545 7.64067 7.98179 7.46118 7.97862C7.2817 7.97546 7.10799 8.04208 6.97665 8.16446L4.2054 10.9357C4.07566 11.0656 4.00279 11.2417 4.00279 11.4253C4.00279 11.6089 4.07566 11.785 4.2054 11.9149L6.97665 14.6861C7.04008 14.7542 7.11657 14.8088 7.20155 14.8467C7.28654 14.8845 7.37828 14.9049 7.4713 14.9065C7.56433 14.9082 7.65673 14.8911 7.74299 14.8562C7.82926 14.8214 7.90763 14.7695 7.97342 14.7037C8.0392 14.6379 8.09107 14.5596 8.12591 14.4733C8.16076 14.387 8.17787 14.2946 8.17623 14.2016C8.17459 14.1086 8.15423 14.0168 8.11636 13.9319C8.07849 13.8469 8.0239 13.7704 7.95583 13.707L6.36698 12.1181H13.9325C14.1162 12.1181 14.2925 12.0451 14.4224 11.9152C14.5523 11.7853 14.6253 11.609 14.6253 11.4253C14.6253 11.2416 14.5523 11.0653 14.4224 10.9354C14.2925 10.8055 14.1162 10.7325 13.9325 10.7325H6.36698L7.95583 9.14363Z" />
      </SideNavIcon>
    </div>
  </aside>
</template>

<script setup>
import { useAuthStore } from '@/stores/auth/auth-store'
import SideNavIcon from '@/components/navigation/SideNavIcon.vue'
import { onMounted, ref } from 'vue';
import { useThemeStore } from '@/stores/theme'
import { storeToRefs } from 'pinia';
import { useLocalStorage } from '@vueuse/core';
const { isDark } = storeToRefs(useThemeStore())

const props = defineProps({
  isDashboardActive: {
    type: Boolean,
    default: false
  },
  isDevicesManagementActive: {
    type: Boolean,
    default: false
  },
  isMasterDataActive: {
    type: Boolean,
    default: false
  }
})

const authStore = useAuthStore();
async function signOut() {
  await authStore.signOut();
}
const goBack = () => {
  router.go(-1);
}

const isExpanded = useLocalStorage('sideNavExpanded',false)

function expandSideNav() {
  isExpanded.value = !isExpanded.value
}


</script>

<style scoped>
.sidebar {
  @apply sticky h-screen w-[60px] py-[16px] items-center z-20 gap-10 top-0 left-0 border-r-2 flex flex-col justify-between transition-all ease-in-out duration-200 bg-bkg-primary border-label-tertiary
}


.sideBarExpanded {
  @apply w-[240px]
}

.sidebar-head {
  @apply flex flex-col justify-center items-start gap-5 w-full
}

.sidebar-body {
  @apply flex flex-col justify-center items-start gap-10 w-full overflow-x-hidden
}

.sidebar-body img {
  @apply h-8
}

.sidebar-foot {
  @apply flex justify-center items-start w-full flex-col gap-10 overflow-x-hidden
}

/* .expandButton {
  @apply w-6 h-6 cursor-pointer absolute z-20 left-[45px] top-[16px] transition-all duration-200 ease-in-out
} */
.expandButton {
  @apply w-6 h-6 cursor-pointer z-20 transition-all duration-200 ease-in-out flex items-center
}

.expandButtonExpanded {
  @apply rotate-180 left-[200px]
}</style>